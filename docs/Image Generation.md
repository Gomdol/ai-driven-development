## 이미지 생성 화면 기능명세서

---

### 프론트엔드 기능명세서

#### 1. 화면 레이아웃 및 디자인 명세 (구현 완료)

- **파일 위치**: `app/generate/page.tsx`

1. **프롬프트 입력 및 스타일 옵션 섹션**
   - **UI 구성**: 
     - 화면 상단에 프롬프트 입력 필드 배치 (ShadCN의 `Textarea` 컴포넌트 사용)
     - 입력 필드 하단에 스타일 옵션 선택을 위한 드롭다운 배치
   - **스타일 옵션**:
     - 예술 스타일 (드롭다운): Realistic, Anime, Oil Painting, Watercolor, Digital Art, Sketch, Pop Art
     - 색조 (드롭다운): Natural, Vibrant, Muted, Monochrome, Warm, Cool, Vintage
   - **오류 처리**: 
     - 프롬프트 미입력 시 "프롬프트를 입력해 주세요" 메시지 표시
     - 최소 3자 이상 입력 필요
   - **상호작용**:
     - Enter 키로 이미지 생성 가능 (Shift + Enter는 줄바꿈)
     - 프롬프트 입력 시 실시간 유효성 검사

2. **이미지 생성 섹션**
   - **파일 위치**: `components/generate/ImagePreview.tsx`
   - **UI 구성**:
     - 중앙에 이미지 프리뷰 영역 배치
     - 하단에 '생성하기' 버튼 (ShadCN의 `Button` 컴포넌트)
     - 로딩 중 상태를 표시할 스피너 애니메이션
   - **상호작용**:
     - 생성 버튼 클릭 시 로딩 상태 표시
     - 이미지 생성 완료 시 프리뷰 영역에 결과물 표시
     - 생성 중 토스트 메시지로 진행 상태 표시
   - **오류 처리**:
     - 생성 실패 시 토스트 메시지로 오류 알림

3. **생성된 이미지 관리 섹션**
   - **UI 구성**:
     - 이미지 프리뷰 하단에 '갤러리에 저장', '커뮤니티 공유', '다운로드' 버튼
     - 각 버튼에 아이콘 포함
   - **상호작용**:
     - 갤러리 저장 시 알림 메시지 표시
     - 커뮤니티 공유 선택 시 공유 설정 모달 표시
     - 다운로드 버튼 클릭 시 이미지 파일 저장

4. **공유 설정 모달**
   - **파일 위치**: `components/generate/ShareModal.tsx`
   - **UI 구성**:
     - 제목 입력 필드 (필수)
     - 설명 입력 필드 (선택사항)
     - 태그 입력 필드 (선택사항, 쉼표로 구분)
     - 공개 범위 설정 (전체 공개/친구 공개/비공개)
   - **상호작용**:
     - 제목 미입력 시 알림 메시지
     - 공유 완료 시 성공 메시지 및 모달 닫기

#### 2. 사용자 흐름 및 상호작용

1. **이미지 생성 프로세스**
   ```
   프롬프트 입력 (3자 이상) → 스타일 옵션 설정 → 
   생성 버튼 클릭 또는 Enter → 로딩 상태 표시 → 
   이미지 생성 완료 → 결과물 표시 및 성공 메시지
   ```

2. **이미지 저장 및 공유 프로세스**
   ```
   이미지 생성 완료 → 
   갤러리 저장/커뮤니티 공유/다운로드 선택 → 
   선택한 작업 수행 → 완료 메시지 표시
   ```

#### 3. API 연동 (목업 데이터 사용 중)

1. **이미지 생성 API**
   - **현재 구현**: 
     - 스타일별 목업 이미지 URL 사용
     - 2초 딜레이로 생성 과정 시뮬레이션
   - **응답 데이터**:
     ```typescript
     const MOCK_IMAGES = {
       'Realistic': string[],
       'Anime': string[],
       'Oil Painting': string[],
       'Digital Art': string[],
       'default': string[]
     }
     ```

2. **갤러리 저장 API**
   - **현재 구현**: 
     - alert로 성공 메시지 표시
     - 실제 저장 기능은 미구현

3. **커뮤니티 공유 API**
   - **현재 구현**: 
     - 모달 UI 구현
     - alert로 성공 메시지 표시
     - 실제 공유 기능은 미구현

#### 4. 테스트 항목

1. **프롬프트 입력 및 스타일 옵션**
   - 3자 미만 입력 시 버튼 비활성화 확인
   - Enter 키 입력 시 이미지 생성 동작 확인
   - 스타일 옵션 변경 시 상태 업데이트 확인

2. **이미지 생성 프로세스**
   - 로딩 상태 및 애니메이션 표시 확인
   - 토스트 메시지 표시 및 자동 제거 확인
   - 선택된 스타일에 따른 이미지 생성 확인

3. **이미지 관리 기능**
   - 다운로드 기능 정상 작동 확인
   - 갤러리 저장 알림 표시 확인
   - 공유 모달 표시 및 입력 필드 동작 확인

4. **반응형 디자인**
   - 모바일/태블릿/데스크톱 레이아웃 확인
   - 터치 디바이스에서 상호작용 확인

---

### 백엔드 기능명세서

#### 1. 이미지 생성 API 구현 (예정)

- **파일 위치**: `app/api/generate/route.ts`
- **기능**:
  - 프롬프트 및 스타일 옵션에 따른 이미지 생성
  - 생성된 이미지의 임시 저장 및 URL 반환
  - 스타일 옵션별 이미지 생성 파라미터 최적화
  - 오류 처리 및 로깅

#### 2. 갤러리 저장 API 구현 (예정)

- **파일 위치**: `app/api/gallery/route.ts`
- **기능**:
  - 이미지 파일 영구 저장
  - 프롬프트 및 스타일 옵션 메타데이터 저장
  - 사용자별 갤러리 관리
  - 저장 실패 시 롤백 처리

#### 3. 커뮤니티 공유 API 구현 (예정)

- **파일 위치**: `app/api/community/post/route.ts`
- **기능**:
  - 게시물 메타데이터 저장
  - 이미지 파일 공유 저장소 이전
  - 태그 처리 및 검색 인덱싱
  - 공개 범위에 따른 접근 제어

#### 4. 테스트 항목 (예정)

1. **이미지 생성 API**
   - 다양한 프롬프트 패턴 처리 테스트
   - 스타일 옵션 조합 결과 검증
   - 오류 상황 복구 테스트
   - 성능 및 타임아웃 테스트

2. **갤러리 저장 API**
   - 파일 저장 성공/실패 케이스
   - 메타데이터 저장 검증
   - 동시성 제어 테스트
   - 저장소 용량 관리 테스트

3. **커뮤니티 공유 API**
   - 게시물 생성 및 수정 테스트
   - 접근 제어 정책 검증
   - 태그 시스템 동작 확인
   - 검색 기능 성능 테스트 